FROM gradle:4.9.0-jre10-slim as build

COPY --chown=gradle . /src

WORKDIR /src

RUN gradle build --stacktrace --continue

FROM openjdk:8-jre-alpine as final

WORKDIR /src

COPY --from=build /src/build/libs/scraper-service.jar .

ENTRYPOINT exec java -jar scraper-service.jar

EXPOSE 8080