{
	"key": "pipeline-parse-skypes",
	"commands": [
		{
			"cmd": "url",
			"params": {
				"urls": [
					"https://m.vk.com/login"
				],
				"timeout": 10
			}
		},
		{
			"cmd": "waitElement",
			"params": {
				"selector": "input[name='email']"
			}
		},
		{
			"cmd": "putText",
			"params": {
				"selector": "input[name='email']",
				"text": "serg.tkachenko@hotmail.com"
			}
		},
		{
			"cmd": "putText",
			"params": {
				"selector": "input[name='pass']",
				"text": "!Prisoner33!"
			}
		},
		{
			"cmd": "click",
			"params": {
				"selector": "input.button.wide_button[type='submit']"
			}
		},
		{
			"cmd": "waitElement",
			"params": {
				"selector": ".ip_user_link"
			}
		},
		{
			"cmd": "loop",
			"params": {
				"commands": [
					{
						"cmd": "url",
						"params": {
							"source": {
								"class": "fromRuntime",
								"property": "userPageUrl"
							}
						}
					},
					{
						"cmd": "waitElement",
						"params": {
							"selector": ".owner_panel"
						}
					},
					{
						"cmd": "condition",
						"params": {
							"ifCommand": {
								"cmd": "waitElement",
								"params": {
									"selector": "a[href^='skype']",
									"timeout": 0
								}
							},
							"trueCommands": [
								{
									"cmd": "getText",
									"params": {
										"key": "skype",
										"selector": "a[href^='skype']",
										"timeout": 0
									}
								}
							],
							"falseCommands": [
								{
									"cmd": "condition",
									"params": {
										"ifCommand": {
											"cmd": "waitElement",
											"params": {
												"selector": ".wide_link.al_pinfo",
												"timeout": 0
											}
										},
										"trueCommands": [
											{
												"cmd": "click",
												"params": {
													"selector": ".wide_link.al_pinfo",
													"timeout": 0
												}
											},
											{
												"cmd": "condition",
												"params": {
													"ifCommand": {
														"cmd": "waitElement",
														"params": {
															"selector": "a[href^='skype']"
														}
													},
													"trueCommands": [
														{
															"cmd": "getText",
															"params": {
																"key": "skype",
																"selector": "a[href^='skype']",
																"timeout": 0
															}
														}
													],
													"falseCommands": []
												}
											}
										],
										"falseCommands": []
									}
								}
							]
						}
					}
				]
			}
		}
	]
}